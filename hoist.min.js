//  Hoist.js 0.2.0
//  https://github.com/flovan/hoist
//  (c) 2015-whateverthecurrentyearis Florian Vanthuyne
//  Hoist may be freely distributed under the MIT license.

!function(a,b){a.hasOwnProperty=a.hasOwnProperty||Object.prototype.hasOwnProperty,Function.prototype.bind||(Function.prototype.bind=function(a){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var b=Array.prototype.slice.call(arguments,1),c=this,d=function(){},e=function(){return c.apply(this instanceof d&&a?this:a,b.concat(Array.prototype.slice.call(arguments)))};return d.prototype=this.prototype,e.prototype=new d,e});var c=function(a,b){"string"!=typeof a&&console.error("Hoist constructor error: container selector needs to be a String."),this.containerSelector=a||this.containerSelector,b=b||{},this.settings=e({},this.settings,b),this.remove=this.remove,this.reset=this.reset,this.init()};c.prototype={win:null,containerSelector:"#container",container:null,items:null,columns:null,active:!1,multipleBreaks:!1,settings:{itemSelector:".block",columns:2,minWidth:0,repeatResize:60},init:function(){var d,c=this;this.container=b.querySelectorAll(this.containerSelector)[0],this.items=b.querySelectorAll(this.settings.itemSelector),this.items.length||console.warn("Hoist error: selector `"+this.settings.itemSelector+"` did not match any elements."),this.multipleBreaks=this.settings.columns.constructor===Array;try{a.addEventListener("resize",g(this.windowResizeHandler.bind(this),50))}catch(e){a.attachEvent("onresize",g(this.windowResizeHandler.bind(this),50))}this.windowResizeHandler.apply(this),d=setTimeout(function(){c.windowResizeHandler.apply(c),clearTimeout(d)},c.settings.repeatResize),this.active=!0},windowResizeHandler:function(){var b=this.getWindowWidth(),c=this.items.length,d=0,e=null,f=this.multipleBreaks?this.getNumCols():this.settings.columns,g=0,k=0;if(this.container.style.position="relative",b<this.settings.minWidth)return this.resetItems(),void 0;for(this.columns=[];f>0;)this.columns.push({w:0,h:0}),f--;for(;c>d;){if(k=0,g>0){for(var l=[],n=0,o=this.columns.length;o>n;n++)l.push(this.columns[n].w);l=l.slice(0,g);for(var n=0,o=l.length;o>n;n++)k+=l[n]}e=this.items[d],e.style.position="absolute",e.style.left=k+"px",e.style.top=this.columns[g].h+"px",this.columns[g].h+=i(e),this.columns[g].w=j(e),g=this.getSmallestCol(),d++}this.columns.sort(function(a,b){return a.h>b.h?1:-1}),this.container.style.height=this.columns.pop().h+"px"},getNumCols:function(){for(var e,a=null,b=this.getWindowWidth(),c=0,d=this.settings.columns.length;d>c;c++)e=this.settings.columns[c],e.breakPoint<b&&(null===a||e.breakPoint>a.breakPoint)&&(a=e);return a?a.columns:0},getSmallestCol:function(){for(var a,b=0,c=this.columns.length,d=null;c>b;b++)null===d?(d=this.columns[b],a=b):d.h>this.columns[b].h&&(a=b,d=this.columns[b]);return a},resetItems:function(){for(var a=0,b=this.items.length;b>a;a++)this.items[a].removeAttribute("style");this.container.removeAttribute("style")},getWindowWidth:function(){return Math.max(b.body.offsetWidth||0,b.documentElement.offsetWidth||0,a.innerWidth||0)},remove:function(){this.resetItems();try{a.removeEventListener("resize",this.windowResizeHandler.bind(this))}catch(b){a.detachEvent("onresize",this.windowResizeHandler.bind(this))}},reset:function(){this.resetItems(),this.items=b.querySelectorAll(this.settings.itemSelector),this.windowResizeHandler.apply(this)}};var d=Date.now||function(){return(new Date).getTime()},e=function(a){if(!f(a))return a;for(var b,c,d=1,e=arguments.length;e>d;d++){b=arguments[d];for(c in b)hasOwnProperty.call(b,c)&&(a[c]=b[c])}return a},f=function(a){var b=typeof a;return"function"===b||"object"===b&&!!a},g=function(a,b,c){var e,f,g,h=null,i=0;c||(c={});var j=function(){i=c.leading===!1?0:d(),h=null,g=a.apply(e,f),h||(e=f=null)};return function(){var k=d();i||c.leading!==!1||(i=k);var l=b-(k-i);return e=this,f=arguments,0>=l||l>b?(h&&(clearTimeout(h),h=null),i=k,g=a.apply(e,f),h||(e=f=null)):h||c.trailing===!1||(h=setTimeout(j,l)),g}},h=function(c,d){var e;return c.currentStyle?e=c.currentStyle[d]:a.getComputedStyle&&(e=b.defaultView.getComputedStyle(c,null).getPropertyValue(d)),e||"auto"},i=function(a){var b=h(a,"margin-top").split("px").shift(),c=h(a,"margin-bottom").split("px").shift();return b=parseInt("auto"===b?0:b),c=parseInt("auto"===c?0:c),Math.round(a.clientHeight+b+c)},j=function(a){var b=h(a,"margin-left").split("px").shift(),c=h(a,"margin-rigth").split("px").shift();return b=parseInt("auto"===b?0:b),c=parseInt("auto"===c?0:c),Math.round(a.clientWidth+b+c)};a.Hoist=a.Hoist||c}(window,document);